function verowa_do_history_back(){return window.history.back(),!1}function verowa_show_api_errors(n,t){let i=Object.keys(n.arr_errors?.fields),r=Object.keys(n.arr_errors?.general);if(r.length>0?verowa_add_error_box(r,n.arr_errors.general,t):jQuery(".verowa_connect_error_box").length>0&&jQuery(".verowa_connect_error_box").remove(),i.length>0)for(let t of i){let i=n.arr_errors.fields[t],r=typeof i=="object"&&i!==null;if(r){let n=Object.keys(i);for(let t of n){let n=i[t],r='<p class="pp_inline_error_msg verowa-inline-error-msg" >'+n+"<\/p>";verowa_add_error_message(t,r)}}else{let n='<p class="pp_inline_error_msg verowa-inline-error-msg" >'+i+"<\/p>";verowa_add_error_message(t,n)}}}function verowa_add_error_box(n,t,i){let r='<div class="verowa_connect_error_box"><ul>';for(let i of n)r+="<li>"+t[i]+"<\/li>";r+="<\/ul><\/div>";0==jQuery(".verowa_connect_error_box").length?jQuery(i).prepend(r):jQuery(i+" .verowa_connect_error_box").replaceWith(r);let u=jQuery(".verowa_connect_error_box").offset().top-200;u<0&&(u=0);window.scrollTo(0,u)}function verowa_assemble_form_data(n){let t={};for(let i of n){let n=i.name;if(n.indexOf("[]")!=-1)n=n.replace("[]",""),t.hasOwnProperty(n)&&"function"==typeof t[n].push||(t[n]=[]),t[n].push(i.value);else if(n.indexOf("[")!=-1||n.indexOf("]")!=-1){let r=n.substring(0,n.length-1).split("[");t.hasOwnProperty(r[0])||(t[r[0]]={});t[r[0]][r[1]]=i.value}else t[n]=i.value}return t}function verowa_add_error_message(n,t){0==jQuery("div[data-id="+n+"] .pp_inline_error_msg").length?(jQuery("div[data-id="+n+"] input").addClass("pp_input_has_error"),jQuery("div[data-id="+n+"]").append(t)):jQuery("div[data-id="+n+"] .pp_inline_error_msg").replaceWith(t)}function verowa_add_loader_animation(n,t){let i='<img src="'+verowa_L10n_functions.BASE_URL+'/wp-content/plugins/verowa-connect/images/ajax-loader.gif" class="verowa-ajax-loader" />';switch(t){case"after":n.after(i);break;default:console.log("verowa_add_loader: mode not available")}}function verowa_remove_loader(){jQuery(".verowa-submit-wrapper .verowa-ajax-loader").fadeOut(300,function(){jQuery(this).remove()})}function verowa_clear_form_fields(n){n.find(":input").each(function(){var n=this.type;n==="text"||n==="password"||n==="textarea"?jQuery(this).val(""):n==="radio"||n==="checkbox"?this.checked=!1:n==="select-one"&&jQuery(this).val("")})}jQuery(document).ready(function(){if(jQuery("#diffrent_contact").change(function(){this.checked?(jQuery("#rentin-persons-billing-title").show(),jQuery("#renting-persons").show(),jQuery("#renting-persons-billing").show()):(jQuery("#rentin-persons-billing-title").hide(),jQuery("#renting-persons-billing").hide())}),jQuery(".has_related_fields").change(function(){jQuery("."+jQuery(this).data("relatedclass")).hide();jQuery("."+jQuery(this).data("relatedclass")+"[data-affecteditems="+jQuery(this).val()+"]").show()}),history.length>1&&jQuery(".back-link:eq(0)").show(),0!=jQuery("#verowa_renting_form_submit").length&&jQuery("#verowa_renting_form_submit").click(function(n){n.preventDefault();n.stopPropagation();let t=jQuery(this).closest("form").serializeArray(),i=verowa_assemble_form_data(t);verowa_add_loader_animation(jQuery(this),"after");jQuery.ajax({method:"POST",url:verowa_L10n_functions.BASE_URL+"/wp-json/verowa/v1/save_renting_request",data:JSON.stringify(i),contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){if(n.arr_errors.fields!=null&&n.arr_errors.general){let t=Object.keys(n.arr_errors.fields),i=Object.keys(n.arr_errors.general);t.length>0||i.length>0?(verowa_show_api_errors(n,".renting-formfields"),verowa_remove_loader()):window.location.href=n.response_url}},error:function(){let t='<div class="verowa_connect_error_box"><ul><li>'+verowa_L10n_functions.api_error_save_renting+"<\/li><\/ul><\/div>";0==jQuery(".verowa_connect_error_box").length?jQuery(".renting-formfields").prepend(t):jQuery(".renting-formfields .verowa_connect_error_box").replaceWith(t);let n=jQuery(".verowa_connect_error_box").offset().top-200;n<0&&(n=0);window.scrollTo(0,n);verowa_remove_loader()}})}),0!=jQuery("#verowa_subs_form_submit").length&&jQuery("#verowa_subs_form_submit").click(function(n){n.preventDefault();n.stopPropagation();jQuery(this).attr("disabled","disabled");let i=jQuery(this).closest("form").serializeArray(),r=verowa_assemble_form_data(i),t=0;for(let n of i)if(-1!==n.name.indexOf("nb_seats_")){let i=parseInt(n.value);!1==isNaN(i)&&i!=null&&(t+=i)}t>0&&(r.nb_seats=t);verowa_add_loader_animation(jQuery(this),"after");jQuery.ajax({method:"POST",url:verowa_L10n_functions.BASE_URL+"/wp-json/verowa/v1/save_subs_request",data:JSON.stringify(r),contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){let i=Object.keys(n?.arr_errors?.fields||[]),r=Object.keys(n?.arr_errors?.general||[]),t=!1;typeof n.message.trim!="undefined"&&0===n.message.trim().length?i.length>0||r.length>0?(verowa_show_api_errors(n,".verowa-subscription-form:eq(0)"),t=!0):window.location.href=n.redirect_url:"error"==n.subs_state?(verowa_add_error_box(["message"],n,".verowa-subscription-form:eq(0)"),t=!0):"ok"==n.subs_state&&(window.location.href=n.redirect_url);t&&(jQuery("#verowa_subs_form_submit").prop("disabled",!1),verowa_remove_loader())},error:function(){console.log(verowa_L10n_functions);let t='<div class="verowa_connect_error_box"><ul><li>'+verowa_L10n_functions.api_error_save_renting+"<\/li><\/ul><\/div>";0==jQuery(".verowa_connect_error_box").length?jQuery(".verowa-subscription-form:eq(0)").prepend(t):jQuery(".verowa-subscription-form .verowa_connect_error_box").replaceWith(t);let n=jQuery(".verowa_connect_error_box").offset().top-200;n<0&&(n=0);window.scrollTo(0,n);jQuery("#verowa_subs_form_submit").prop("disabled",!1);verowa_remove_loader()}})}),0!=jQuery("#verowa_renting_form_submit").length||0!=jQuery("#verowa_subs_form_submit").length){jQuery(":checkbox").change(function(){jQuery(this).closest("div").find(".pp_inline_error_msg").remove();jQuery(this).closest("div.multiple-choice-block").find(".pp_inline_error_msg").remove();0==jQuery(".pp_inline_error_msg").length&&jQuery(".verowa_connect_error_box").remove()});jQuery(".renting-formfields input:not(:checkbox), .renting-formfields select, .renting-formfields textarea, .verowa-subscription-form input:not(:checkbox), .verowa-subscription-form select, .verowa-subscription-form textarea").on("keyup change",function(){jQuery(this).next(".pp_inline_error_msg").remove();jQuery(this).removeClass("pp_input_has_error");jQuery(this).closest("div.verowa-input-radio").find(".pp_inline_error_msg").remove();0==jQuery(".pp_inline_error_msg").length&&jQuery(".verowa_connect_error_box").remove()})}jQuery(".verowa-renting-formfields input[type=number]").keyup(function(){let n=parseInt(jQuery(this).attr("maxlength"));jQuery(this).val(jQuery(this).val().substring(0,n))});0!=jQuery("#verowa-resend-subs-form-submit").length&&jQuery("#verowa-resend-subs-form-submit").click(function(n){n.preventDefault();n.stopPropagation();let i={},t=jQuery(this).closest("div");i.event_id=t.find("input[name=event_id]").val();i.subs_id=t.find("input[name=subs_id]").val();i.email=t.find("input[name=email]").val();jQuery.ajax({method:"POST",url:verowa_L10n_functions.BASE_URL+"/wp-json/verowa/v1/resend_subscription_mail",data:JSON.stringify(i),contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){!0===n.mail_sent?(t.addClass("verowa-resend-success"),t.html(n.message)):(t.addClass("verowa-resend-error"),t.html(n.message))},error:function(n){t.addClass("verowa-resend-error");t.html(n.message)}})})});