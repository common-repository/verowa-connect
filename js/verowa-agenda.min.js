function event_handler_detail_link_clickt(n){n.stopPropagation()}function datepicker_to_technical_date(){var t="",i,n;return document.getElementById("verowa_connect_datepicker")!=null&&(i=document.getElementById("verowa_connect_datepicker").value,n=i.split("."),n=n.reverse(),t=n.join("")),t}function load_agenda_events(n){jQuery("#infinite-scroll-loader").show();n&&(g_current_batch=1,jQuery(".event_list_dynamic_agenda").html(""),g_has_further_results=!0);var r=datepicker_to_technical_date(),t={date:r,arr_list_ids:[],search_string:jQuery("#vc-agenda-search-input").val()??"",wpml_language_code:jQuery("#wpml-language-code").val()};let i=parseInt(jQuery("#verowa-atts-list-id").val());isNaN(i)||0===i||t.arr_list_ids.push(i);jQuery("#verowa_event_filters .list_filter a.selected").each(function(n,i){jQuery(i).attr("data-filter-value")!=""&&t.arr_list_ids.push(parseInt(jQuery(i).attr("data-filter-value").split("-")[1]))});jQuery.ajax({url:verowa_L10n_agenda.BASE_URL+"/wp-json/verowa/v1/agenda_event/"+g_current_batch+"/",type:"GET",data:t,contentType:"application/json; charset=utf-8",dataType:"JSON",success:function(n){g_lock_scroll_load=!1;g_current_batch++;jQuery(".event_list_dynamic_agenda").append(n.content);g_agenda_is_loading=!1;jQuery("#infinite-scroll-loader").hide();jQuery(".event_list_dynamic_agenda > div").length==0?jQuery("#no-events-box").show():jQuery("#no-events-box").hide();g_has_further_results=n.has_further_results;g_has_further_results&&g_filter_has_changed&&(g_filter_has_changed=!1,load_agenda_events(!0))},error:function(){g_agenda_is_loading=!1;g_has_further_results=!0;g_filter_has_changed&&(g_filter_has_changed=!1,load_agenda_events(!0))}})}function bind_infinite_scroll(){window.addEventListener("scroll",()=>{const{scrollTop:t,scrollHeight:i,clientHeight:n}=document.documentElement;!g_lock_scroll_load&&t+n>=i-2*n&&g_current_batch<g_max_loadings&&g_has_further_results&&!g_agenda_is_loading&&g_has_further_results&&(load_agenda_events(!1),g_agenda_is_loading=!0)},{passive:!0})}function scroll_to_event(n){if(jQuery(".event-"+n).length>=1&&n!==0&&n!=null){var t=jQuery(".event-"+n).offset().top,i=jQuery(".inside-navigation").height()||0,r=t-i-30;jQuery("html, body").animate({scrollTop:r},0)}}function verowa_agenda_filter_reset(){var n=new Date,r="0"+n.getDate(),t,i,u;n.getDate()>9&&(r=n.getDate());t=n.getMonth()+1;i="0"+t;t>9&&(i=t);u=r+"."+i+"."+n.getFullYear();jQuery("#verowa_connect_datepicker").val(u);jQuery("#verowa_event_filters .filter-button.selected").removeClass("selected");jQuery("#verowa_event_filters .no-filter:not(.selected)").addClass("selected");jQuery("#vc-agenda-search-input").val("");load_agenda_events(!0)}function supports_session_storage(){try{if("sessionStorage"in window&&window.sessionStorage!==null)return sessionStorage.setItem("testitem",!0),sessionStorage.removeItem("testitem"),!0}catch(n){return!1}}function verowa_toggle_event_list_handler(n){n.preventDefault();var t=jQuery(this).attr("data-id");jQuery(this).find(".toggle_button").hasClass("open")?(jQuery(".event-"+t+" .short_text").toggle(),jQuery(".event-"+t+" .event_button_list").toggle(),jQuery(".event-"+t+" .event_content").html(""),jQuery(this).find(".toggle_button.open").removeClass("open"),jQuery(this).find(".toggle_button").css({transform:"rotate(0deg)"})):(jQuery(this).find(".toggle_button").addClass("open"),jQuery(this).find(".toggle_button").css({transform:"rotate(180deg)"}),jQuery.getJSON({url:verowa_L10n_agenda.BASE_URL+"/wp-json/verowa/v1/event/"+t,data:"",success:function(n){var i,r,u;jQuery(".event-"+t+" .short_text").toggle();jQuery(".event-"+t+" .event_button_list").toggle();i='<div class="first"><\/div>';n.short_desc!="undefined"&&(i+='<p class="short_desc">'+n.short_desc+"<\/p>");r="";n.catering!=null&&n.catering.toString()!=""&&(r+=', <span class="catering">'+n.catering+"<\/span>");n.childcare_text!=null&&n.childcare_text.toString()!=""&&(r+=', <span class="childcare_text">'+n.childcare_text+"<\/span>");n.baptism_offer_text!=null&&n.baptism_offer_text.toString()=="ja"&&(r+=', <span class="baptism_offer_text">mit Taufe<\/span>');r!=""&&(i+='<p class="event_meta">',i+=r.replace(", ",""),i+="<\/p>");u="";n.organizer!=null&&n.organizer.toString()!==""&&(u+=", "+n.organizer.name);"coorganizers"in n&&n.coorganizers.forEach(function(n){u+=", "+n.name});n.further_coorganizer!=null&&n.further_coorganizer.toString()!==""&&(u+=", "+n.further_coorganizer);u!=""&&(i+='<p class="organizers">',i+=u.replace(", ",""),i+="<\/p>");jQuery(".event-"+t+" .event_content").html(i)}}))}var g_max_loadings=50,g_current_batch=1,g_agenda_is_loading=!1,g_has_further_results=!0,g_filter_has_changed=!1,g_lock_scroll_load=!0,dateToday;jQuery(document).ready(function(){jQuery(document).on("click touch",".event_list_item a:not(.verowa_excl_stop_propagation)",function(n){n.stopPropagation()});jQuery(document).on("click touch",".event_list_wrapper .event_list_item",verowa_toggle_event_list_handler);jQuery("#vc-agenda-search-wrapper button").click(function(n){n.preventDefault();n.stopPropagation();g_agenda_is_loading?g_filter_has_changed=!0:(load_agenda_events(!0),g_agenda_is_loading=!0)});jQuery("#vc-agenda-search-input").keyup(function(n){let t=n.keyCode||n.which;t==13&&(g_agenda_is_loading?g_filter_has_changed=!0:(load_agenda_events(!0),g_agenda_is_loading=!0))});jQuery(".details-button").on("click touch",function(n){n.stopPropagation()});jQuery(document).on("click","#verowa_event_filters .list_filter a",function(){var n=jQuery(this),t;if(!n.hasClass("selected"))return t=n.parents(".option-set"),t.find(".selected").removeClass("selected"),n.addClass("selected"),g_agenda_is_loading?g_filter_has_changed=!0:(load_agenda_events(!0),g_agenda_is_loading=!0),!1});jQuery("#verowa_connect_datepicker").change(function(){var n=jQuery(this);return g_agenda_is_loading?g_filter_has_changed=!0:(load_agenda_events(!0),g_agenda_is_loading=!0),!1})});dateToday=new Date;jQuery(function(){jQuery("#verowa_connect_datepicker").datepicker({dateFormat:"dd.mm.yy",monthNames:["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],minDate:dateToday,firstDay:1,dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"]});jQuery(".dashicons-calendar-alt").on("click",function(){jQuery("#verowa_connect_datepicker").focus()})});